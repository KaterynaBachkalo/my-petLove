import{j as e,I as C,r as i,m as V,u as q,f as A,n as H,e as U,o as J,p as W,q as X}from"./index-C8LEDz42.js";import{a as Y,F as $,P as Z}from"./Pagination-CC3agV_D.js";import{u as _,C as Q}from"./index.esm-Co8OnR6u.js";import{c as ee,a as R,o as se}from"./index.esm-CAO83pyR.js";const te=({title:s,imgURL:a,popularity:n,name:c,birthday:l,sex:o,species:t,category:x,comment:u})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:a,alt:s,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:s}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(C,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:n})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:c})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:Y(l)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:o})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:x})]})]}),e.jsx("p",{className:"notices-text",children:u})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",children:"Read more"}),e.jsx("div",{className:"notices-add-favorite",children:e.jsx(C,{className:"icon-heart",name:"heart"})})]})]})}),ne=(s,a,n)=>{i.useEffect(()=>{const c=o=>{o.code==="Escape"&&s(!1)},l=o=>{a.current&&!a.current.contains(o.target)&&(n!=null&&n.current)&&!(n!=null&&n.current.contains(o.target))&&s(!1)};return window.addEventListener("keydown",c),document.addEventListener("mousedown",l),()=>{window.removeEventListener("keydown",c),document.removeEventListener("mousedown",l)}},[s,a,n])},B=V.forwardRef(({onSelect:s,onClose:a,data:n},c)=>{const l=t=>{s(t)},o=i.useRef(null);return ne(a,o,c),e.jsx("div",{ref:o,children:e.jsx("div",{children:e.jsx("ul",{className:"menu-categories-list",children:n&&n.map(t=>e.jsx("li",{className:"",onClick:()=>l(t),children:t},t))})})})}),ae=["sell","free","lost","found"],ce=["unknown","female","male","multiple"],oe=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],F=({placeholder:s,setSearchQuery:a})=>{const n=ee({category:R(),gender:R(),type:R()}).required(),{handleSubmit:c,control:l,setValue:o}=_({resolver:se(n)}),t=q(),x=i.useRef(null),u=i.useRef(null),w=i.useRef(null),m=i.useRef(null),[r,S]=A(),[p,f]=i.useState(r.get("category")??""),[g,N]=i.useState(r.get("gender")??""),[j,v]=i.useState(r.get("type")??"");i.useEffect(()=>{f(r.get("category")??""),N(r.get("gender")??""),v(r.get("type")??"")},[r]);const[M,b]=i.useState(!1),[L,P]=i.useState(!1),[T,E]=i.useState(!1),D=d=>{a(h=>({...h,...d})),O(d),t(H(1))},z=()=>{c(D)()},K=()=>{s==="Category"?b(!M):s==="By gender"?P(!L):E(!T)},k=d=>{s==="Category"?f(d):s==="By gender"?N(d):v(d),b(!1),P(!1),E(!1)},O=d=>{const h=new URLSearchParams(r);Object.entries(d).forEach(([G,I])=>{I?h.set(G,I):h.delete(G)}),S(h)};return i.useEffect(()=>{o("category",p),o("gender",g),o("type",j)},[p,o,g,j]),e.jsx("form",{onSubmit:c(D),children:e.jsxs("div",{className:`find-form-wrap ${s==="Category"||s==="By gender"?"category":s==="By type"?"type":""}`,children:[e.jsx(Q,{name:s==="Category"?"category":s==="By gender"?"gender":"type",control:l,render:({field:d})=>e.jsx("input",{...d,className:"input find-input",placeholder:s,value:s==="Category"?p:s==="By gender"?g:j,onBlur:z})}),e.jsx("button",{type:"button",className:"find-form-button",onClick:K,ref:x,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(C,{name:"chevron-down",className:"icon-search"})})}),M&&e.jsx(B,{onSelect:k,onClose:()=>b(!1),ref:u,data:ae}),L&&e.jsx(B,{onSelect:k,onClose:()=>P(!1),ref:w,data:ce}),T&&e.jsx(B,{onSelect:k,onClose:()=>E(!1),ref:m,data:oe})]})})},y=({setSearchQuery:s,text:a,isActive:n,onClick:c})=>{const l=()=>{s(o=>({...o,title:n?"":a})),c()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${n?"cross":""}`,onClick:l,children:[a,n&&e.jsx(C,{className:"icon-cross",name:"close"})]})})},ie=({setSearchQuery:s})=>{const[a,n]=i.useState(null),c=l=>{n(a===l?null:l)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx($,{setSearchQuery:s,placeholder:"Search"}),e.jsx(F,{setSearchQuery:s,placeholder:"Category"}),e.jsx(F,{setSearchQuery:s,placeholder:"By gender"}),e.jsx(F,{setSearchQuery:s,placeholder:"By type"}),e.jsx($,{setSearchQuery:s,placeholder:"Location"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsxs("div",{className:"sort-button-wrap",children:[e.jsx(y,{setSearchQuery:s,text:"Popular",isActive:a==="Popular",onClick:()=>c("Popular")}),e.jsx(y,{setSearchQuery:s,text:"Unpopular",isActive:a==="Unpopular",onClick:()=>c("Unpopular")}),e.jsx(y,{setSearchQuery:s,text:"Cheap",isActive:a==="Cheap",onClick:()=>c("Cheap")}),e.jsx(y,{setSearchQuery:s,text:"Expensive",isActive:a==="Expensive",onClick:()=>c("Expensive")})]})]})})},ue=()=>{const s=U(J),a=6,[n,c]=A();i.useEffect(()=>{n.has("page")||c({page:"1"})},[n,c]);const l=Number(n.get("page"))||1,o=U(W),[t,x]=i.useState({title:null,category:null,gender:null,type:null,location:null}),u=q();i.useEffect(()=>{const m={page:l,limit:a,title:t!=null&&t.title?t.title:null,category:t!=null&&t.category?t.category:null,gender:t!=null&&t.gender?t.gender:null,type:t!=null&&t.type?t.type:null,location:t!=null&&t.location?t.location:null};u(X(m))},[l,u,t]);const w=m=>{c({page:String(m)})};return e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(ie,{setSearchQuery:x})]}),e.jsx("div",{className:"news-cards notices-cards",children:s&&s.length>0?s.map(({name:m,title:r,imgURL:S,species:p,birthday:f,sex:g,category:N,comment:j,popularity:v})=>e.jsx(te,{name:m,title:r,imgURL:S,species:p,birthday:f,sex:g,category:N,comment:j,popularity:v},r)):e.jsx("p",{children:"There are news yet"})}),e.jsx(Z,{totalItems:o,currentPage:l,onPageChange:w})]})};export{ue as default};
