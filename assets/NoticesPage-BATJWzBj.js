import{j as e,I as w,r as o,m as K,u as $,f as q,n as O,e as U,o as V,p as H,q as J,t as W}from"./index-C1RYSWvx.js";import{a as X,F as Y,P as Z}from"./Pagination-Du35aSU7.js";import{u as _,C as Q}from"./index.esm-BvHU-xIl.js";import{c as ee,a as R,o as se}from"./index.esm-DlfsTR1i.js";const te=({title:s,imgURL:a,popularity:t,name:c,birthday:i,sex:l,species:n,category:d,comment:u})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:a,alt:s,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:s}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(w,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:t})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:c})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:X(i)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:l})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:n})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:d})]})]}),e.jsx("p",{className:"notices-text",children:u})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",children:"Read more"}),e.jsx("div",{className:"notices-add-favorite",children:e.jsx(w,{className:"icon-heart",name:"heart"})})]})]})}),ne=(s,a,t)=>{o.useEffect(()=>{const c=l=>{l.code==="Escape"&&s(!1)},i=l=>{a.current&&!a.current.contains(l.target)&&(t!=null&&t.current)&&!(t!=null&&t.current.contains(l.target))&&s(!1)};return window.addEventListener("keydown",c),document.addEventListener("mousedown",i),()=>{window.removeEventListener("keydown",c),document.removeEventListener("mousedown",i)}},[s,a,t])},F=K.forwardRef(({onSelect:s,onClose:a,data:t},c)=>{const i=d=>{s(d)},l=()=>{s("")},n=o.useRef(null);return ne(a,n,c),e.jsx("div",{className:"menu-modal",children:e.jsx("div",{className:"menu-modal-container",children:e.jsxs("ul",{className:"menu-categories-list",ref:n,children:[e.jsx("li",{className:"menu-categories-item",onClick:l,children:"Show all"}),t&&t.map(d=>e.jsx("li",{className:"menu-categories-item",onClick:()=>i(d),children:d},d))]})})})}),ae=["sell","free","lost","found"],ce=["unknown","female","male","multiple"],oe=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],B=({placeholder:s,setSearchQuery:a})=>{const t=ee({category:R(),sex:R(),species:R()}).required(),{handleSubmit:c,control:i,setValue:l}=_({resolver:se(t)}),n=$(),d=o.useRef(null),u=o.useRef(null),f=o.useRef(null),p=o.useRef(null),[m,S]=q(),[g,N]=o.useState(m.get("category")??""),[j,v]=o.useState(m.get("sex")??""),[h,C]=o.useState(m.get("species")??""),[M,b]=o.useState(!1),[L,P]=o.useState(!1),[T,k]=o.useState(!1),D=r=>{a(x=>({...x,...r})),G(r),n(O(1))},z=()=>{s==="Category"?b(!M):s==="By gender"?P(!L):k(!T)},E=r=>{const x={};s==="Category"?(N(r),x.category=r||void 0):s==="By gender"?(v(r),x.sex=r||void 0):(C(r),x.species=r||void 0),b(!1),P(!1),k(!1),G(x),c(D)()},G=r=>{const x=new URLSearchParams(m);Object.entries(r).forEach(([A,I])=>{I?x.set(A,I):x.delete(A)}),S(x)};return o.useEffect(()=>{N(m.get("category")??""),v(m.get("sex")??""),C(m.get("type")??"")},[m]),o.useEffect(()=>{l("category",g||""),l("sex",j||""),l("species",h||"")},[g,j,h,l]),e.jsx("form",{onSubmit:c(D),ref:d,children:e.jsxs("div",{className:`find-form-wrap ${s==="Category"||s==="By gender"?"category":s==="By type"?"type":""}`,children:[e.jsx(Q,{name:s==="Category"?"category":s==="By gender"?"sex":"species",control:i,render:({field:r})=>e.jsx("input",{...r,className:"input find-input",placeholder:s,value:s==="Category"?g:s==="By gender"?j:h})}),e.jsx("button",{type:"button",className:"find-form-button",onClick:z,ref:s==="Category"?u:s==="By gender"?f:p,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(w,{name:"chevron-down",className:"icon-search"})})}),M&&e.jsx(F,{onSelect:E,onClose:()=>b(!1),ref:u,data:ae}),L&&e.jsx(F,{onSelect:E,onClose:()=>P(!1),ref:f,data:ce}),T&&e.jsx(F,{onSelect:E,onClose:()=>k(!1),ref:p,data:oe})]})})},y=({setSearchQuery:s,text:a,isActive:t,onClick:c})=>{const i=()=>{s(l=>({...l,title:t?"":a})),c()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${t?"cross":""}`,onClick:i,children:[a,t&&e.jsx(w,{className:"icon-cross",name:"close"})]})})},ie=({setSearchQuery:s})=>{const[a,t]=o.useState(null),c=i=>{t(a===i?null:i)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx(Y,{setSearchQuery:s,placeholder:"Search"}),e.jsx(B,{setSearchQuery:s,placeholder:"Category"}),e.jsx(B,{setSearchQuery:s,placeholder:"By gender"}),e.jsx(B,{setSearchQuery:s,placeholder:"By type"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsxs("div",{className:"sort-button-wrap",children:[e.jsx(y,{setSearchQuery:s,text:"Popular",isActive:a==="Popular",onClick:()=>c("Popular")}),e.jsx(y,{setSearchQuery:s,text:"Unpopular",isActive:a==="Unpopular",onClick:()=>c("Unpopular")}),e.jsx(y,{setSearchQuery:s,text:"Cheap",isActive:a==="Cheap",onClick:()=>c("Cheap")}),e.jsx(y,{setSearchQuery:s,text:"Expensive",isActive:a==="Expensive",onClick:()=>c("Expensive")})]})]})})},xe=()=>{const s=U(V),a=6,[t,c]=q();o.useEffect(()=>{t.has("page")||c({page:"1"})},[t,c]);const i=Number(t.get("page"))||1,l=U(H),[n,d]=o.useState({title:t.get("title")||null,category:t.get("category")||null,sex:t.get("sex")||null,species:t.get("species")||null,location:t.get("location")||null}),u=$();o.useEffect(()=>{const p={page:i,limit:a,title:n!=null&&n.title?n.title:null,category:n!=null&&n.category?n.category:null,sex:n!=null&&n.sex?n.sex:null,species:n!=null&&n.species?n.species:null,location:n!=null&&n.location?n.location:null};u(J(p)),u(W(n))},[i,u,n]);const f=p=>{c({page:String(p)})};return e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(ie,{setSearchQuery:d})]}),e.jsx("div",{className:"news-cards notices-cards",children:s&&s.length>0?s.map(({name:p,title:m,imgURL:S,species:g,birthday:N,sex:j,category:v,comment:h,popularity:C})=>e.jsx(te,{name:p,title:m,imgURL:S,species:g,birthday:N,sex:j,category:v,comment:h,popularity:C},m)):e.jsx("p",{children:"There are news yet"})}),e.jsx(Z,{totalItems:l,currentPage:i,onPageChange:f})]})};export{xe as default};
