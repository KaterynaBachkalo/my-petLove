import{j as e,I as N,r as l,m as z,n as K,e as k,o as O,f as V,p as H,u as J,q as W}from"./index-BA6MF1pn.js";import{a as X,F as G,P as Y}from"./Pagination-BGnx-YGo.js";import{u as Z,C as _}from"./index.esm-DmnHcuUa.js";import{c as Q,a as E,o as ee}from"./index.esm-sV2H5BV_.js";const se=({title:s,imgURL:a,popularity:n,name:o,birthday:t,sex:i,species:c,category:m,comment:d})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:a,alt:s,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:s}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(N,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:n})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:o})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:X(t)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:i})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:c})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:m})]})]}),e.jsx("p",{className:"notices-text",children:d})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",children:"Read more"}),e.jsx("div",{className:"notices-add-favorite",children:e.jsx(N,{className:"icon-heart",name:"heart"})})]})]})}),te=(s,a,n)=>{l.useEffect(()=>{const o=i=>{i.code==="Escape"&&s(!1)},t=i=>{a.current&&!a.current.contains(i.target)&&(n!=null&&n.current)&&!(n!=null&&n.current.contains(i.target))&&s(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",t),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",t)}},[s,a,n])},P=z.forwardRef(({onSelect:s,onClose:a,data:n},o)=>{const t=c=>{s(c)},i=l.useRef(null);return te(a,i,o),e.jsx("div",{ref:i,children:e.jsx("div",{children:e.jsx("ul",{className:"menu-categories-list",children:n&&n.map(c=>e.jsx("li",{className:"",onClick:()=>t(c),children:c},c))})})})}),ne=["sell","free","lost","found"],ae=["unknown","female","male","multiple"],ce=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],R=({placeholder:s,setSearchQuery:a})=>{const n=Q({category:E(),gender:E(),type:E()}).required(),{handleSubmit:o,control:t,setValue:i}=Z({resolver:ee(n)}),[c,m]=K(),[d,j]=l.useState(c.get("category")??""),[x,g]=l.useState(c.get("gender")??""),[u,f]=l.useState(c.get("type")??"");l.useEffect(()=>{j(c.get("category")??""),g(c.get("gender")??""),f(c.get("type")??"")},[c]);const v=l.useRef(null),y=l.useRef(null),I=l.useRef(null),U=l.useRef(null),[B,C]=l.useState(!1),[F,w]=l.useState(!1),[M,S]=l.useState(!1),L=r=>{a(p=>({...p,...r})),A(r)},$=()=>{o(L)()},q=()=>{s==="Category"?C(!B):s==="By gender"?w(!F):S(!M)},b=r=>{s==="Category"?j(r):s==="By gender"?g(r):f(r),C(!1),w(!1),S(!1)},A=r=>{const p=new URLSearchParams(c);Object.entries(r).forEach(([T,D])=>{D?p.set(T,D):p.delete(T)}),m(p)};return l.useEffect(()=>{i("category",d),i("gender",x),i("type",u)},[d,i,x,u]),e.jsx("form",{onSubmit:o(L),children:e.jsxs("div",{className:`find-form-wrap ${s==="Category"||s==="By gender"?"category":s==="By type"?"type":""}`,children:[e.jsx(_,{name:s==="Category"?"category":s==="By gender"?"gender":"type",control:t,render:({field:r})=>e.jsx("input",{...r,className:"input find-input",placeholder:s,value:s==="Category"?d:s==="By gender"?x:u,onBlur:$})}),e.jsx("button",{type:"submit",className:"find-form-button",onClick:q,ref:v,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(N,{name:"chevron-down",className:"icon-search"})})}),B&&e.jsx(P,{onSelect:b,onClose:()=>C(!1),ref:y,data:ne}),F&&e.jsx(P,{onSelect:b,onClose:()=>w(!1),ref:I,data:ae}),M&&e.jsx(P,{onSelect:b,onClose:()=>S(!1),ref:U,data:ce})]})})},h=({setSearchQuery:s,text:a,isActive:n,onClick:o})=>{const t=()=>{s(i=>({...i,title:n?"":a})),o()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${n?"cross":""}`,onClick:t,children:[a,n&&e.jsx(N,{className:"icon-cross",name:"close"})]})})},oe=({setSearchQuery:s})=>{const[a,n]=l.useState(null),o=t=>{n(a===t?null:t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx(G,{setSearchQuery:s,placeholder:"Search"}),e.jsx(R,{setSearchQuery:s,placeholder:"Category"}),e.jsx(R,{setSearchQuery:s,placeholder:"By gender"}),e.jsx(R,{setSearchQuery:s,placeholder:"By type"}),e.jsx(G,{setSearchQuery:s,placeholder:"Location"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsxs("div",{className:"sort-button-wrap",children:[e.jsx(h,{setSearchQuery:s,text:"Popular",isActive:a==="Popular",onClick:()=>o("Popular")}),e.jsx(h,{setSearchQuery:s,text:"Unpopular",isActive:a==="Unpopular",onClick:()=>o("Unpopular")}),e.jsx(h,{setSearchQuery:s,text:"Cheap",isActive:a==="Cheap",onClick:()=>o("Cheap")}),e.jsx(h,{setSearchQuery:s,text:"Expensive",isActive:a==="Expensive",onClick:()=>o("Expensive")})]})]})})},me=()=>{const s=k(O),a=6,n=k(V),o=k(H),[t,i]=l.useState({title:null,category:null,gender:null,type:null,location:null}),c=J();return l.useEffect(()=>{const m={page:n,limit:a,title:t!=null&&t.title?t.title:null,category:t!=null&&t.category?t.category:null,gender:t!=null&&t.gender?t.gender:null,type:t!=null&&t.type?t.type:null,location:t!=null&&t.location?t.location:null};c(W(m))},[n,c,t]),e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(oe,{setSearchQuery:i})]}),e.jsx("div",{className:"news-cards notices-cards",children:s&&s.length>0?s.map(({name:m,title:d,imgURL:j,species:x,birthday:g,sex:u,category:f,comment:v,popularity:y})=>e.jsx(se,{name:m,title:d,imgURL:j,species:x,birthday:g,sex:u,category:f,comment:v,popularity:y},d)):e.jsx("p",{children:"There are news yet"})}),e.jsx(Y,{totalItems:o})]})};export{me as default};
